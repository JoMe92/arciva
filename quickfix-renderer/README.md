# Quickfix Renderer (WASM)

This crate hosts the WebAssembly renderer core for Quickfix. It targets `wasm32-unknown-unknown` and exposes a small initialization API compiled with [`wasm-bindgen`](https://github.com/rustwasm/wasm-bindgen).

## Features

- **Backends**: feature flags toggle which `wgpu` backend to request.
  - `webgpu` (default): enables the WebGPU backend.
  - `webgl2`: enables the WebGL2 backend.
  - `cpu`: enables a CPU-friendly GL fallback for headless environments.
- **Bindings**: `wasm-bindgen` exports `initialize_renderer()` which selects an adapter and reports its backend/name/features.
- **Testing**: `wasm-bindgen-test` runs in a headless Chrome environment via `wasm-pack test`.
- **Bundling**: `wasm-pack build --target bundler` emits JS + TypeScript bindings in `pkg/`, which are re-bundled through Vite in library mode (ESM output with sourcemaps) and additional TypeScript declarations from `ts/`.

## Commands

Run from the `quickfix-renderer` directory:

- Build the WASM bindings and Vite library bundle:
  ```bash
  pnpm build
  ```
- Run the WASM tests (headless Chrome):
  ```bash
  pnpm wasm:test
  ```
- Clean build outputs:
  ```bash
  pnpm clean
  ```

The published package includes both the `pkg/` folder generated by `wasm-pack` and the Vite-built ESM bundle in `dist/` with TypeScript typings.
